<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.chart.*?>

<BorderPane xmlns="http://javafx.com/javafx/24.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="productivityApp.DashboardController">

    <top>
        <ToolBar>
            <Label fx:id="lblWelcome" text="Welcome"/>
            <Pane HBox.hgrow="ALWAYS"/>
            <Button text="Logout" onAction="#logout"/>
        </ToolBar>
    </top>

    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE">
            <!-- Journal -->
            <Tab text="Journal">
                <BorderPane>
                    <top>
                        <HBox spacing="10" padding="10">
                            <DatePicker fx:id="journalDate"/>
                            <Button text="Save Entry" onAction="#saveJournal"/>
                        </HBox>
                    </top>
                    <center>
                        <TextArea fx:id="journalText" promptText="Write today's thoughts..." wrapText="true"/>
                    </center>
                    <right>
                        <VBox spacing="6" padding="10">
                            <Label text="Recent Entries"/>
                            <ListView fx:id="journalList" prefWidth="280"/>
                        </VBox>
                    </right>
                </BorderPane>
            </Tab>

            <!-- Tasks -->
            <Tab text="Tasks">
                <BorderPane>
                    <top>
                        <HBox spacing="10" padding="10">
                            <TextField fx:id="taskTitle" promptText="Task title" prefWidth="300"/>
                            <DatePicker fx:id="taskDue" promptText="Due date"/>
                            <Button text="Add Task" onAction="#addTask"/>
                        </HBox>
                    </top>
                    <center>
                        <TableView fx:id="taskTable">
                            <columns>
                                <TableColumn fx:id="colTitle" text="Title" prefWidth="300"/>
                                <TableColumn fx:id="colDue" text="Due" prefWidth="120"/>
                                <TableColumn fx:id="colDone" text="Done" prefWidth="80"/>
                            </columns>
                        </TableView>
                    </center>
                </BorderPane>
            </Tab>

            <!-- Analytics -->
            <Tab text="Analytics">
                <VBox spacing="12" padding="12">
                    <Label text="Tasks Completed per Day (last 14 days)"/>
                    <LineChart fx:id="activityChart">
                        <xAxis>
                            <CategoryAxis label="Date"/>
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="# completed"/>
                        </yAxis>
                    </LineChart>

                    <Separator/>

                    <Label text="Journal Sentiment per Day (placeholder)"/>
                    <LineChart fx:id="sentimentChart">
                        <xAxis><CategoryAxis label="Date"/></xAxis>
                        <yAxis><NumberAxis label="Sentiment"/></yAxis>
                    </LineChart>
                </VBox>
            </Tab>
        </TabPane>
    </center>
</BorderPane>
